{% extends 'internal-base.html.twig' %}
{% block content %}
    <h1>
        Création de votre personnage
    </h1>
    <div class="alert alert-info" role="alert">
        Votre personnage est l'élément le plus important de votre empire.
    </div>
    <form action="{{ path('register') }}" method="post">
        <div class="form-group">
            <label for="characterLastName">Nom du personnage</label>
            <input type="text"
                   name="lastName"
                   required="required"
                   class="form-control"
                   id="characterLastName"
                   placeholder="Nom de famille"
                   value="{{ lastName|default('') }}" />
            <small class="form-text text-muted">
                Pourquoi pas
                <a href="#"
                   class="click-to-complete"
                   data-target="characterLastName">{{ random.lastName }}</a>
                ?
            </small>
        </div>
        <div class="form-group">
            <label for="characterFirstName">Prénom du personnage</label>
            <input type="text"
                   name="firstName"
                   required="required"
                   class="form-control"
                   id="characterFirstName"
                   placeholder="Prénom"
                   value="{{ firstName|default('') }}" />
            <small class="form-text text-muted">
                Pourquoi pas
                <a href="#"
                   class="click-to-complete"
                   data-target="characterFirstName">{{ random.firstName }}</a>
                ?
            </small>
        </div>
        <div class="form-group">
            <label for="characterGivenName">Surnom du personnage</label>
            <input type="text"
                   name="givenName"
                   class="form-control"
                   id="characterGivenName"
                   placeholder="Surnom"
                   value="{{ givenName|default('') }}" />
            <small class="form-text text-muted">
                Pourquoi pas
                <a href="#"
                   class="click-to-complete"
                   data-target="characterGivenName">{{ random.givenName }}</a>
                ?
            </small>
        </div>
        <div class="form-group form-check">
            <p>
                Il vous reste
                <span class="whole-remainder-number"
                      data-whole="skillpoints">{{ startSkillPoints }}</span>
                points à attribuer.
            </p>
            {% for skill in skills %}
            <p>
                <input type="number"
                       min="0"
                       step="1"
                       max="{{ startSkillPoints }}"
                       name="skill[{{ skill.id }}]"
                       class="form-control whole-control-number"
                       data-whole="skillpoints"
                       value="0"
                       id="characterSkill_{{ skill.id }}" />
                <label class="form-check-label"
                       for="characterSkill_{{ skill.id }}">
                    {{ skill.name }}
                </label>
            </p>{% endfor %}
        </div>
        <input type="hidden"
               name="_csrf"
               value="{{ csrf_token('user-character') }}" />
        <button type="submit"
                name="createCharacter"
                class="btn btn-primary">Créer ce premier personnage</button>
    </form>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        jQuery(function(){
            let wn = new voidfield.WholeNumber('skillpoints', {{ startSkillPoints }});
            wn.bindEvents();
        });
    </script>
{% endblock %}